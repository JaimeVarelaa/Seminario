<ion-header>
  <ion-toolbar>
    <ion-title>Registro</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="closeModal()">
        <ion-icon name="close-outline" size="large"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="container">
    <div class="step-indicator">
      <div class="step" *ngFor="let step of steps; let i = index" [class.active]="i < currentStep"
        [class.clickable]="i <= currentStep" (click)="goToStep(i+1)">
        <div class="circle">{{ i + 1 }}</div>
        <div class="label">{{ step }}</div>
      </div>
    </div>

    <div class="content-between">

      <div *ngIf="currentStep === 1" class="photo-section">
        <ion-thumbnail *ngIf="adulto.foto" (click)="capturePhoto()" class="photo-container">
          <img [src]="adulto.foto" alt="Foto del adulto" class="photo-image" />
          <div class="photo-indicator">
            Toca para cambiar la foto
          </div>
        </ion-thumbnail>

        <ion-thumbnail *ngIf="!adulto.foto" (click)="capturePhoto()" class="photo-container">
          <img src="assets/images/camara-fotografica.png" alt="Foto" class="photo-image" />
          <div class="photo-indicator">
            Toca para agregar foto
          </div>
        </ion-thumbnail>
      </div>

      <div *ngIf="currentStep === 2" class="data-section">
        <br>
        <ion-input color="secondary" label="Nombres" label-placement="floating" fill="outline"
          placeholder="Ingrese el nombre" [value]="adulto.nombres" (input)="changeValue($event, 'nombres')"></ion-input>
        <br>
        <ion-input color="secondary" label="Apellido Paterno" label-placement="floating" fill="outline"
          placeholder="Ingrese Apellido Paterno" [value]="adulto.apeliido_paterno"
          (input)="changeValue($event, 'apeliido_paterno')"></ion-input>
        <br>
        <ion-input color="secondary" label="Apellido Materno" label-placement="floating" fill="outline"
          placeholder="Ingrese Apellido Materno" [value]="adulto.apellido_materno"
          (input)="changeValue($event, 'apellido_materno')"></ion-input>
        <br>
        <ion-input color="secondary" label="Edad" label-placement="floating" fill="outline" placeholder="Ingrese Edad"
          type="number" [value]="adulto.edad" (input)="changeValue($event, 'edad')"></ion-input>
        <br>
        <ion-input color="secondary" label="Teléfono" label-placement="floating" fill="outline" placeholder="4491234567"
          type="tel" [value]="adulto.contacto.numero" (input)="changeValue($event, 'contacto.numero')"></ion-input>
        <br>
        <div class="date" style="display: flex; justify-content: center;">
          <ion-datetime color="secondary" id="datetime" presentation="date" [value]="adulto.fecha_nac"
            (ionChange)="changeValue($event, 'fecha_nac')">
          </ion-datetime>
        </div>
      </div>

      <div *ngIf="currentStep === 3" class="adress-section">
        <br>
        <ion-input color="secondary" label="Calle" label-placement="floating" fill="outline" placeholder="Ingrese Calle"
          [value]="adulto.direccion.calle" (input)="changeValue($event, 'direccion.calle')"></ion-input>
        <br>
        <ion-input color="secondary" label="Número" label-placement="floating" fill="outline"
          placeholder="Ingrese número del domicilio" type="number" [value]="adulto.direccion.numero"
          (input)="changeValue($event, 'direccion.numero')"></ion-input>
        <br>
        <ion-input color="secondary" label="Colonia" label-placement="floating" fill="outline"
          placeholder="Ingrese Colonia" [value]="adulto.direccion.colonia"
          (input)="changeValue($event, 'direccion.colonia')"></ion-input>
        <br>
        <ion-input color="secondary" label="Código Postal" label-placement="floating" fill="outline"
          placeholder="Ingrese el Código Postal" type="number" [value]="adulto.direccion.cp"
          (input)="changeValue($event, 'direccion.cp')"></ion-input>
        <br>
        <ion-input color="secondary" label="Municipio" label-placement="floating" fill="outline"
          placeholder="Ingrese Municipio" [value]="adulto.direccion.municipio"
          (input)="changeValue($event, 'direccion.municipio')"></ion-input>
        <br>
        <ion-input color="secondary" label="Estado" label-placement="floating" fill="outline"
          placeholder="Ingrese Estado" [value]="adulto.direccion.estado"
          (input)="changeValue($event, 'direccion.estado')"></ion-input>
        <br>
        <ion-input color="secondary" label="Referencia" label-placement="floating" fill="outline"
          placeholder="Ingrese Referencia" [value]="adulto.direccion.referencia"
          (input)="changeValue($event, 'direccion.referencia')"></ion-input>
        <br>
      </div>

    </div>

    <div class="button-container">
      <ion-button expand="block" (click)="goBack()" [disabled]="currentStep === 1">
        <ion-icon name="arrow-back" slot="start"></ion-icon>
        Atrás
      </ion-button>
      <ion-button expand="block" (click)="goNext()">
        {{ currentStep === steps.length ? 'Aceptar' : 'Siguiente' }}
        <ion-icon name="arrow-forward" slot="end"></ion-icon>
      </ion-button>
    </div>
  </div>
</ion-content>